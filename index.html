<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock, Paper, Scissors</title>
</head>
<body>
    <script>
        //define array with the 3 options
        const choice = ["rock", "paper", "scissors"];
        
        //Computer randomly chooses 1 of 3 options and stores in different variable
        let getComputerChoice = () => choice[Math.floor(Math.random() * choice.length)];


        //Present player with 3 options and ensure they input valid response
        function checkPrompt() {
            ///make sure that user entered correct option
            let playerInput = prompt("Rock, Paper, or Scissors?");
            while (choice.includes(playerInput.toLowerCase()) === false) {
                playerInput = prompt("Please only type \'Rock\' \'Paper\' or \'Scissors\' below");
            }
            //lower case the values for easy comparison;
            return playerInput.toLowerCase();
        } 

        //new function called game -- to loop through 5 rounds of playRound function (below) and keep score using a counter
        function game() {
            let finalWinner = '';
            let playerScore = 0;
            let computerScore = 0;
            //five rounds
            for (let i = 1; i <= 5; i++) {
                //get computer & player selections for each round
                let computerSelection = getComputerChoice(); 
                console.log("Computer Choice is = " + computerSelection);
                let playerSelection = checkPrompt();
                console.log("Player Selection is = " + playerSelection);

                //if it's a tie, prompt player and computer again
                if (playerSelection === computerSelection) {
                alert("It's a tie! Let's go again.");
                computerSelection = getComputerChoice(); 
                console.log("Computer Choice is = " + computerSelection);
                playerSelection = checkPrompt();
                console.log("Player Selection is = " + playerSelection);           
                }

                //else figure out who is the winner
                let roundWinner = playRound(playerSelection, computerSelection);
                console.log("winner of round " + i + " is " + roundWinner);
                roundWinner === "computer" ? computerScore++ : playerScore++;
            }

            if (computerScore > playerScore) {
                finalWinner = "computer";
            }
            else if (playerScore > computerScore) {
                finalWinner = "player";
            }
            else if (computerScore === playerScore) {
                finalWinner = "tie, no one wins";
                alert("It's a tie! Let's go again.");
            }
            return finalWinner;
        }

        console.log("final winner is = " + game());

        
            //function to play 1 round
            function playRound(playerSelection, computerSelection) {
            // If player chose the same option as the computer, prompt again
            let roundWinner = '';

            // If player chose Rock...
            if (playerSelection === "rock") {
                //If Computer chose Scissors, Player wins
                if (computerSelection === "scissors") {
                    alert("Rock beats Scissors! You win!");
                    roundWinner = "player";
                }
                //If Computer chose Paper, Computer wins
                else if (computerSelection === "paper") {
                    alert("Womp. Paper beats Rock. You lose.");
                    roundWinner = "computer";
                }
            }

            else if (playerSelection === "paper") {
                //If Computer chose Rock, Player wins
                if (computerSelection === "rock") {
                    alert("Paper beats Rock! You win!");
                    roundWinner = "player";

                }
                //If Computer chose scissors, Computer wins
                else if (computerSelection === "scissors") {
                    alert("Womp. Scissors beats Paper. You lose.");
                    roundWinner = "computer";
                }
            }

            else if (playerSelection === "scissors") {
                //If Computer chose Paper, Player wins
                if (computerSelection === "paper") {
                    alert("Scissors beats Paper! You win!");
                    roundWinner = "player";
                }
                //If Computer chose Rock, Computer wins
                else if (computerSelection === "rock") {
                    alert("Womp. Rock beats Scissors. You lose.");
                    roundWinner = "computer";
                }
            }
            return roundWinner;
        }



    </script>
    
</body>
</html>