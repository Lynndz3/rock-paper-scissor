<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock, Paper, Scissors</title>
</head>
<body>
    <h1>Rock, Paper, Scissors</h1>
    <h2 class="dynamic-string">Ready to take on the computer? First to 5 wins. Choose wisely!</h2>
    <button id="rock">Rock</button>
    <button id="paper">Paper</button>
    <button id ="scissors">Scissors</button>
    <div class="score-container">
        <div class="player"><p>Player Score: </p><span class="value">0</span></div>
        <div class="computer"><p>Computer Score</p><span class="value">0</span></div>
    </div>
    
    <script>
        //define array with the 3 options
        const choice = ["rock", "paper", "scissors"];

        const buttons = document.querySelectorAll('button');

        let playerScoreValue = document.querySelector('.score-container .player .value');
        let computerScoreValue = document.querySelector('.score-container .computer .value');
        let dynamicString = document.querySelector('.dynamic-string');
        console.log(dynamicString);

        //get computer selection
        let getComputerChoice = () => choice[Math.floor(Math.random() * choice.length)];
        let computerSelection = getComputerChoice();

        buttons.forEach((button) => {
                button.addEventListener('click', () =>
                        playRound(button.id, computerSelection));
                    });
        
        //function to play 1 round
        function playRound(playerSelection, computerSelection) {
            // If player chose the same option as the computer, prompt again
            let roundWinner = '';
            console.log(playerSelection);
            console.log(computerSelection);
            
            if (playerSelection === computerSelection) {
                alert("It's a tie!");   
                }

            // If player chose Rock...
            if (playerSelection === "rock") {
                //If Computer chose Scissors, Player wins
                if (computerSelection === "scissors") {
                    alert("Rock beats Scissors! You win!");
                    roundWinner = "player";
                    increaseScore(playerScoreValue);
                }
                //If Computer chose Paper, Computer wins
                else if (computerSelection === "paper") {
                    alert("Womp. Paper beats Rock. You lose.");
                    roundWinner = "computer";
                    increaseScore(computerScoreValue);
                }
            }

            else if (playerSelection === "paper") {
                //If Computer chose Rock, Player wins
                if (computerSelection === "rock") {
                    alert("Paper beats Rock! You win!");
                    roundWinner = "player";
                    increaseScore(playerScoreValue);

                }
                //If Computer chose scissors, Computer wins
                else if (computerSelection === "scissors") {
                    alert("Womp. Scissors beats Paper. You lose.");
                    roundWinner = "computer";
                    increaseScore(computerScoreValue);
                }
            }

            else if (playerSelection === "scissors") {
                //If Computer chose Paper, Player wins
                if (computerSelection === "paper") {
                    alert("Scissors beats Paper! You win!");
                    roundWinner = "player";
                    increaseScore(playerScoreValue);
                }
                //If Computer chose Rock, Computer wins
                else if (computerSelection === "rock") {
                    alert("Womp. Rock beats Scissors. You lose.");
                    roundWinner = "computer";
                    increaseScore(computerScoreValue);
                }
            }
            updateText(playerScoreValue, computerScoreValue);
            checkGameOver(playerScoreValue, computerScoreValue);
        };

        function increaseScore(node) {
            let currentVal = parseInt(node.textContent);
            let newVal = currentVal + 1;
            node.textContent = newVal;
        }

        function checkGameOver(playerScore, computerScore) {
            if (playerScore.textContent === "5") {
                dynamicString.textContent = "You win! Game over.";
                playerScore.textContent = "0";
                computerScore.textContent = "0";
            };
            if (computerScore.textContent === "5") {
                dynamicString.textContent = "Womp, computer wins. Game over!";
                playerScore.textContent = "0";
                computerScore.textContent = "0";
            };
            return 0;
        }

        function updateText(playerScore, computerScore) {
            if (playerScore.textContent === "1" || computerScore.textContent === "1") {
                dynamicString.textContent = "It's heating up!"
            }
        }

    </script>
    
    </body>
</html>